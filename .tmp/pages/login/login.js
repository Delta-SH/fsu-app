"use strict";loader.define(function(n,o,i){var a=null,r=!0,l={name:"登录",ip:null,user:null,password:null,loading:null};return l.init=function(){this.ip=router.$("#app-login-ip"),this.user=router.$("#app-login-user"),this.password=router.$("#app-login-password"),!0===isNull(this.loading)&&(this.loading=bui.loading({appendTo:".login-page",text:"正在加载"})),bui.input({id:".user-input",showIcon:!1,onFocus:function(n){$(n.target).closest(".bui-btn").addClass("onfocus")},onBlur:function(n){$(n.target).closest(".bui-btn").removeClass("onfocus")}}),bui.input({id:".password-input",iconClass:".appicon-eyeclose",callback:function(n){this.toggleType(),$(n.target).toggleClass("appicon-eyeopen")},onFocus:function(n){$(n.target).closest(".bui-btn").addClass("onfocus")},onBlur:function(n){$(n.target).closest(".bui-btn").removeClass("onfocus")}}),router.$("#app-login-login").on("click",function(n){var e,s,o,i=l.ip.val().trim(),t=l.user.val().trim(),u=l.password.val().trim();!0!==isEmpty(i)?!0!==isEmpty(t)?!0!==isEmpty(u)?(setRemember({ip:i,user:t}),a=new AppRequest(i,t,""),e=t,s=u,(o=l.loading).option("text","请求令牌"),o.show(),a.Post({url:"GetToken",timeout:5e3},function(n){var t=n.data.Token;a.SetToken(t),loader.import("js/md5.min.js",function(){var n,o,i;n=e,o=md5(t+"2"+md5(s)),(i=l.loading).option("text","验证用户"),i.show(),a.Post({url:"Login",timeout:1e4,data:{uid:n,pwd:o}},function(n){$appRequest=a,!0===r&&setAppRequest({ip:a.GetIP(),user:a.GetUser(),token:a.GetToken()}),router.isLoad("main")?router.back({name:"main",callback:function(n){n.init(),n.load(),success("欢迎回来",1500)}}):router.load({url:"main",effect:"zoom",callback:function(){success("欢迎使用",1500)}})},function(n){warning(n.message)},function(){i.hide()})})},function(n){warning(n.message)},function(){o.hide()})):warning("密码不能为空"):warning("用户名不能为空"):warning("服务器地址不能为空")}),router.$("#app-login-forgot").on("click",function(n){bui.alert("请与系统管理员联系~")})},l.load=function(){var n=getRemember();!1===isNull(n)&&(this.ip.val(n.ip),this.user.val(n.user))},l.dispose=function(){},l.init(),l.load(),l});